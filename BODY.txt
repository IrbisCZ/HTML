
document.addEventListener('DOMContentLoaded', function () {
  // âŒ NepouÅ¡tÄ›t na strÃ¡nce koÅ¡Ã­ku
  if (window.location.pathname.includes('/kosik')) return;

  document.querySelectorAll('input[name="amount"]').forEach(function (originalInput) {
    // âŒ NepouÅ¡tÄ›t v hlaviÄce
    if (originalInput.closest('header')) return;

    // âœ… Povolit i v detailu produktu â€“ odstranÄ›na podmÃ­nka s .quantity

    originalInput.style.display = 'none';

    const wrapper = document.createElement('div');
    wrapper.classList.add('quantity-wrapper');

    const minus = document.createElement('button');
    minus.textContent = 'âˆ’';
    minus.className = 'quantity-btn minus';

    const plus = document.createElement('button');
    plus.textContent = '+';
    plus.className = 'quantity-btn plus';

    const input = document.createElement('input');
    input.className = 'quantity-input';
    input.type = 'text';
    input.value = originalInput.value;

    originalInput.parentNode.insertBefore(wrapper, originalInput.nextSibling);
    wrapper.appendChild(minus);
    wrapper.appendChild(input);
    wrapper.appendChild(plus);

    minus.addEventListener('click', function (e) {
      e.preventDefault();
      let val = parseInt(input.value);
      if (val > 1) {
        val--;
        input.value = val;
        originalInput.value = val;
      }
    });

    plus.addEventListener('click', function (e) {
      e.preventDefault();
      let val = parseInt(input.value);
      val++;
      input.value = val;
      originalInput.value = val;
    });

    input.addEventListener('input', function () {
      let val = parseInt(input.value);
      if (!isNaN(val) && val > 0) {
        originalInput.value = val;
      }
    });
  });
});

// VloÅ¾enÃ­ obrÃ¡zku do prÃ¡zdnÃ©ho koÅ¡Ã­ku
document.addEventListener('DOMContentLoaded', function () {
  const heading = document.querySelector('.cart-empty .cart-heading');

  if (heading) {
    const img = document.createElement('img');
    img.src = 'https://github.com/IrbisCZ/Ikony/blob/main/kapy-neni.png?raw=true';
    img.alt = 'PrÃ¡zdnÃ½ koÅ¡Ã­k';
    img.style.display = 'block';
    img.style.margin = '20px auto';
    img.style.maxWidth = '250px';
    img.style.opacity = '0.95';

    // VloÅ¾Ã­me obrÃ¡zek hned za nadpis
    heading.insertAdjacentElement('afterend', img);
  }
});
document.addEventListener("DOMContentLoaded", function () {
    const headings = document.querySelectorAll('.cart-wrapper h3');
    headings.forEach(function (h3) {
      if (h3.textContent.trim() === "Zkuste vyhledÃ¡vÃ¡nÃ­") {
        h3.textContent = "A nebo mÅ¯Å¾ete zkusit vyhledÃ¡vaÄ";
      }
    });
  });

// ÃšspÄ›Å¡nÃ© pÅ™idÃ¡nÃ­ do koÅ¡Ã­ku
document.addEventListener('DOMContentLoaded', function () {
  function showSuccessPopup() {
    const popup = document.createElement("div");
    popup.innerText = "ZboÅ¾Ã­ bylo pÅ™idÃ¡no do koÅ¡Ã­ku ðŸ›’";
    popup.style.position = "fixed";
    popup.style.bottom = "20px";
    popup.style.right = "20px";
    popup.style.backgroundColor = "rgba(255, 255, 255, 0.9)";
    popup.style.color = "#4CAF50";
    popup.style.padding = "15px 25px";
    popup.style.borderRadius = "999px";
    popup.style.boxShadow = "0 0 15px rgba(0, 0, 0, 0.1)";
    popup.style.fontSize = "16px";
    popup.style.fontFamily = "sans-serif";
    popup.style.border = "2px solid #4CAF50";
    popup.style.zIndex = "9999";
    popup.style.opacity = "1";
    popup.style.transition = "opacity 0.5s ease";

    document.body.appendChild(popup);

    setTimeout(() => {
      popup.style.opacity = "0";
      setTimeout(() => popup.remove(), 500);
    }, 3000);
  }

  // PoÄkÃ¡me na ajax pÅ™idÃ¡nÃ­ produktu (Shoptet posÃ­lÃ¡ custom event 'ShoptetCartUpdated')
  document.addEventListener('ShoptetCartUpdated', function (e) {
    // PodmÃ­nka: zobrazit popup jen pokud to nenÃ­ zmÄ›na mnoÅ¾stvÃ­ v koÅ¡Ã­ku (napÅ™. v /kosik)
    if (!window.location.pathname.includes('/kosik')) {
      showSuccessPopup();
    }
  });
});
  document.addEventListener('DOMContentLoaded', function () {
    const observer = new MutationObserver(function (mutations) {
      mutations.forEach(function (mutation) {
        const popup = document.querySelector('#cboxLoadedContent');

        if (popup && popup.textContent.includes('PÅ™idÃ¡no do koÅ¡Ã­ku')) {
          // ZavÅ™i nebo skryj jen tenhle konkrÃ©tnÃ­ popup
          document.querySelector('#colorbox')?.style.setProperty('display', 'none', 'important');
          document.querySelector('#cboxOverlay')?.style.setProperty('display', 'none', 'important');
        }
      });
    });

    observer.observe(document.body, { childList: true, subtree: true });
  });
  
  // Skryje celÃ½ obsah strÃ¡nky pÅ™i naÄÃ­tÃ¡nÃ­
  document.documentElement.style.display = 'none';
 // NaÄte CSS soubor
  fetch('https://raw.githubusercontent.com/IrbisCZ/HTML/refs/heads/main/Zahlavi.txt')
    .then(response => response.text())
    .then(data => {
      const head = document.head;
      const style = document.createElement('style');
      style.innerHTML = data;
      head.appendChild(style);

      // Po naÄtenÃ­ CSS zobrazÃ­ strÃ¡nku
      document.documentElement.style.display = 'block';
    })
    .catch(error => {
      console.error('Chyba pÅ™i naÄÃ­tÃ¡nÃ­ souboru:', error);
      document.documentElement.style.display = 'block';
    });
 // NaÄte CSS soubor
  fetch('https://raw.githubusercontent.com/IrbisCZ/HTML/refs/heads/main/Zahlavi.txt')
    .then(response => response.text())
    .then(data => {
      const head = document.head;
      const style = document.createElement('style');
      style.innerHTML = data;
      head.appendChild(style);

      // Po naÄtenÃ­ CSS zobrazÃ­ strÃ¡nku
      document.documentElement.style.display = 'block';
    })
    .catch(error => {
      console.error('Chyba pÅ™i naÄÃ­tÃ¡nÃ­ souboru:', error);
      document.documentElement.style.display = 'block';
    });
  /*vyhledÃ¡vaÄ*/
document.addEventListener("DOMContentLoaded", function () {
  const input = document.querySelector('input[type="search"]');
  if (!input) return;

  // NastavenÃ­ barvy placeholder textu
  const style = document.createElement("style");
  style.textContent = `
    input[type="search"]::placeholder {
      color: #749cb5 !important;
      opacity: 1;
    }
  `;
  document.head.appendChild(style);

  const phrases = [
    "VyÄmuchat dobrotyâ€¦",
    "NÄ›jakÃ½ konkrÃ©tnÃ­ pamlsek?",
  ];
  let currentPhrase = 0;
  let currentChar = 0;
  let typing = true;
  let stoppedByUser = false;

  // âŒ ZastavÃ­ animaci, kdyÅ¾ uÅ¾ivatel klikne do pole
  input.addEventListener("focus", () => {
    stoppedByUser = true;
  });
  // âœ… SpustÃ­ animaci zpÄ›t, kdyÅ¾ uÅ¾ivatel odejde z pole
  input.addEventListener("blur", () => {
    if (input.value === "") {
      stoppedByUser = false;
      animatePlaceholder();
    }
  });
  function animatePlaceholder() {
    if (!input || stoppedByUser) return;
    const text = phrases[currentPhrase];

    if (typing) {
      currentChar++;
      if (currentChar > text.length) {
        typing = false;
        setTimeout(animatePlaceholder, 1000);
        return;
      }
      input.placeholder = text.substring(0, currentChar);
      setTimeout(animatePlaceholder, 120);
    } else {
      currentChar--;
      input.placeholder = text.substring(0, currentChar);
      const speed = 60;
      setTimeout(() => {
        if (currentChar === 0) {
          typing = true;
          currentPhrase = (currentPhrase + 1) % phrases.length;
        }
        animatePlaceholder();
      }, speed);
    }
  }
  animatePlaceholder();
});
  /*TEST - KOÅ ÃK*/ 
   document.addEventListener("DOMContentLoaded", function () {
    // Smazat "Dostupnost"
    const cartLabels = document.querySelectorAll('.cart-content .p-label');
    cartLabels.forEach(el => {
      if (el.textContent.trim().toLowerCase() === 'dostupnost') {
        el.remove();
      }
    });
    // Smazat "PÅ™ipraveno k snÄ›dku"
    const stockInfo = document.querySelectorAll('.cart-content .availability-label');
    stockInfo.forEach(el => el.remove());
  });
    document.addEventListener('DOMContentLoaded', function () {
    document.querySelectorAll('.cart-content td.p-price.p-cell').forEach(function (cell) {
      if (cell.textContent.includes('Cena za m. j.')) {
        cell.innerHTML = cell.innerHTML.replace('Cena za m. j.', 'Cena za kus');
      }
    });
  });
document.addEventListener('DOMContentLoaded', function () {
  document.querySelectorAll('.cart-content .unit-value').forEach(function (el) {
    el.remove();
  });
});
